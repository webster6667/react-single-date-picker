"use strict";var e=require("@babel/runtime/helpers/slicedToArray"),t=require("@babel/runtime/helpers/asyncToGenerator"),n=require("@babel/runtime/helpers/defineProperty"),r=require("@babel/runtime/regenerator"),a=require("react"),l=require("bem-components-connector"),o=require("date-helper-js");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=i(e),s=i(t),d=i(n),u=i(r),f=i(a);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g=({styles:e={},...t})=>f.default.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 240.823 240.823"},t),f.default.createElement("path",{d:"M183.189 111.816L74.892 3.555c-4.752-4.74-12.451-4.74-17.215 0-4.752 4.74-4.752 12.439 0 17.179l99.707 99.671-99.695 99.671c-4.752 4.74-4.752 12.439 0 17.191 4.752 4.74 12.463 4.74 17.215 0l108.297-108.261c4.68-4.691 4.68-12.511-.012-17.19z"}));function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){d.default(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".single-date-picker {\n  display: inline-flex;\n  flex-direction: column;\n}\n.single-date-picker__header {\n  display: flex;\n  flex-direction: column;\n}\n.single-date-picker__nav {\n  display: flex;\n  align-items: center;\n  padding: 5px 0;\n}\n.single-date-picker__open-date {\n  display: flex;\n  margin: 0 auto;\n}\n.single-date-picker__open-date span {\n  align-items: center;\n  justify-content: center;\n  margin: 0 2px;\n  font-size: 12px;\n  color: black;\n}\n.single-date-picker__arrow {\n  position: relative;\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n}\n.single-date-picker__arrow svg {\n  width: 10px;\n  fill: slategrey;\n}\n.single-date-picker__arrow:hover svg {\n  fill: black;\n}\n.single-date-picker__arrow_left svg {\n  transform: rotate(180deg);\n  transform-origin: center;\n}\n.single-date-picker__arrow_left:hover {\n  transform: translateX(-1px);\n}\n.single-date-picker__arrow_right:hover {\n  transform: translateX(1px);\n}\n.single-date-picker__header-row {\n  display: flex;\n  padding: 5px 0;\n}\n.single-date-picker__day-of-week {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 25px;\n  height: 25px;\n  margin: 1px;\n  color: silver;\n  font-size: 9px;\n}\n.single-date-picker__table {\n  display: flex;\n  flex-direction: column;\n}\n.single-date-picker__date-row {\n  display: flex;\n}\n.single-date-picker__date-cell {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 21px;\n  height: 21px;\n  margin: 1px;\n  font-size: 12px;\n  cursor: pointer;\n  border: 2px solid transparent;\n}\n.single-date-picker__date-cell:hover:not(.single-date-picker__date-cell_selected) {\n  border-radius: 50%;\n  border-color: silver;\n}\n.single-date-picker__date-cell_prev,\n.single-date-picker__date-cell_next {\n  opacity: .5;\n}\n.single-date-picker__date-cell_selected {\n  cursor: auto;\n  border-radius: 50%;\n  border: 2px solid #d8d7d7;\n  background-color: #d8d7d7;\n}\n");var v=l.bemClassName("single-date-picker"),y=function(e){var t=e.duration,n=void 0===t?"left":t,r=e.onClick,a=e.children,o=void 0===a?null:a;return f.default.createElement("div",{onClick:r,className:l.elementClassesConcat(v(),"arrow",d.default({},n,!0))},o||f.default.createElement(g,null))},b=function(e){var t=e.dayOfWeekArray,n=(void 0===t?["П","В","С","Ч","П","С","В"]:t).map((function(e,t){return f.default.createElement("span",{className:v("day-of-week"),key:t},e)}));return f.default.createElement("div",{className:v("header-row")},n)},x=function(e){var t=e.openMonthDate,n=e.selectedDate,r=e.setSelectedDate,a=e.cellContentLayout,i=e.beforeCellClick,p=e.afterCellClick,g=o.getPrevMonth(t),h=o.getNextMonth(t),m=o.getLastDateOfMonth(g),y=o.getDayOfMonthNumber(m),b=o.getFirstDateOfMonth(t),x=o.getLastDateOfMonth(t),k=o.getDayOfWeekNumber(b),C=o.getDayOfWeekNumber(x),_=k?k-1:6,w=o.getDayOfMonthNumber(x),D=C?8-C:0,O=function(e,t,n,r,a){var i=[],c=[];return function(p,g){var h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return Array(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0).fill("").forEach((function(y,b){var x,k=++b,C=m?m+k:k,_=o.getDateByDayOfMonthNumber(g,C),w=null!==t&&o.isDatesEqual(_,t),D=l.elementClassesConcat(v(),"date-cell",(x={},d.default(x,h,Boolean(h)),d.default(x,"selected",w),x)),O="function"==typeof e?e({monthStatus:p,cellDate:_,selectedDate:t,dateNumber:C}):C;c.push(f.default.createElement("div",{key:_.getTime(),className:D,onClick:s.default(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof r){e.next=3;break}return e.next=3,r(_);case 3:if(n((function(){return _})),"function"!=typeof a){e.next=7;break}return e.next=7,a(_);case 7:case"end":return e.stop()}}),e)})))},O)),7===c.length&&(i.push(f.default.createElement("div",{key:i.length,className:v("date-row")},c)),c=[])})),[i]}}(a,n,r,i,p);O("prev",g,_,"prev",y-_);var M=O("open",t,w),N=c.default(M,1)[0];4===N.length&&(D=D?D+7:14),5===N.length&&(D=D||7);var E=O("next",h,D,"next"),j=c.default(E,1)[0];return f.default.createElement("div",{className:v("table")},j)};module.exports=function(e){var t=e.className,n=void 0===t?"":t,r=e.modifiers,i=void 0===r?{}:r,d=e.openDate,p=void 0===d?new Date:d,g=e.value,h=e.cellContentLayout,k=e.navContentLayout,C=e.arrowContent,_=e.beforeChangeMonth,w=e.afterChangeMonth,D=e.beforeChangeYear,O=e.afterChangeYear,M=e.beforeCellClick,N=e.afterCellClick,E=a.useState(g),j=c.default(E,2),P=j[0],S=j[1],Y=a.useState(p),L=c.default(Y,2),q=L[0],B=L[1],F=l.blockClassesConcat(v(),i,n);return f.default.createElement("div",{className:F},f.default.createElement("div",{className:v("header")},function(e){var t=e.openMonthDate,n=e.setOpenMonthDate,r=e.selectedDate,a=e.setSelectedDate,l=e.arrowContent,i=e.navContentLayout,c=e.beforeChangeMonth,d=e.afterChangeMonth,p=e.beforeChangeYear,g=e.afterChangeYear,h=t.getMonth(),b=o.getMonthNameByMonthIndex(h),x=t.getFullYear(),k={openMonthDate:t,setOpenMonthDate:n,openMonthName:b,openMontYearNumber:x,selectedDate:r,setSelectedDate:a},C=function(){var e=s.default(u.default.mark((function e(r){var a,l;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="next"===r?o.getNextMonth(t):o.getPrevMonth(t),l=t.getFullYear()!==a.getFullYear(),"function"!=typeof c){e.next=4;break}return e.next=4,c(k);case 4:if("function"!=typeof p||!l){e.next=7;break}return e.next=7,p(k);case 7:if(n((function(){return a})),"function"!=typeof d){e.next=11;break}return e.next=11,d(k);case 11:if("function"!=typeof g||!l){e.next=14;break}return e.next=14,g(k);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_="function"==typeof i?i(m(m({},k),{},{changeMonthAction:C})):null;return f.default.createElement("div",{className:v("nav")},_?f.default.createElement(f.default.Fragment,null,_):f.default.createElement(f.default.Fragment,null,f.default.createElement(y,{duration:"left",onClick:function(){return C("prev")}},l),f.default.createElement("div",{className:v("open-date")},f.default.createElement("span",{className:v("month-name")},b),f.default.createElement("span",{className:v("full-year")},x)),f.default.createElement(y,{duration:"right",onClick:function(){return C("next")}},l)))}({openMonthDate:q,setOpenMonthDate:B,selectedDate:P,arrowContent:C,navContentLayout:k,setSelectedDate:S,beforeChangeMonth:_,afterChangeMonth:w,beforeChangeYear:D,afterChangeYear:O}),f.default.createElement(b,null)),x({openMonthDate:q,selectedDate:P,setSelectedDate:S,cellContentLayout:h,beforeCellClick:M,afterCellClick:N}))};
