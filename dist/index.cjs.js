"use strict";var e=require("@babel/runtime/helpers/slicedToArray"),t=require("@babel/runtime/helpers/asyncToGenerator"),n=require("@babel/runtime/helpers/defineProperty"),r=require("@babel/runtime/regenerator"),a=require("react"),l=require("bem-components-connector"),o=require("date-helper-js");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var c=i(e),s=i(t),d=i(n),u=i(r),f=i(a);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h=({styles:e={},...t})=>f.default.createElement("svg",p({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 240.823 240.823"},t),f.default.createElement("path",{d:"M183.189 111.816L74.892 3.555c-4.752-4.74-12.451-4.74-17.215 0-4.752 4.74-4.752 12.439 0 17.179l99.707 99.671-99.695 99.671c-4.752 4.74-4.752 12.439 0 17.191 4.752 4.74 12.463 4.74 17.215 0l108.297-108.261c4.68-4.691 4.68-12.511-.012-17.19z"}));function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){d.default(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===n&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".single-date-picker {\n  display: inline-flex;\n  flex-direction: column;\n}\n.single-date-picker__header {\n  display: flex;\n  flex-direction: column;\n}\n.single-date-picker__nav {\n  display: flex;\n  align-items: center;\n  padding: 5px 0;\n}\n.single-date-picker__open-date {\n  display: flex;\n  margin: 0 auto;\n}\n.single-date-picker__open-date span {\n  align-items: center;\n  justify-content: center;\n  margin: 0 2px;\n  font-size: 12px;\n  color: black;\n}\n.single-date-picker__arrow {\n  position: relative;\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n}\n.single-date-picker__arrow svg {\n  width: 10px;\n  fill: slategrey;\n}\n.single-date-picker__arrow:hover svg {\n  fill: black;\n}\n.single-date-picker__arrow_left svg {\n  transform: rotate(180deg);\n  transform-origin: center;\n}\n.single-date-picker__arrow_left:hover {\n  transform: translateX(-1px);\n}\n.single-date-picker__arrow_right:hover {\n  transform: translateX(1px);\n}\n.single-date-picker__header-row {\n  display: flex;\n  padding: 5px 0;\n}\n.single-date-picker__day-of-week {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 25px;\n  height: 25px;\n  margin: 1px;\n  color: silver;\n  font-size: 9px;\n}\n.single-date-picker__table {\n  display: flex;\n  flex-direction: column;\n}\n.single-date-picker__date-row {\n  display: flex;\n}\n.single-date-picker__date-cell {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 21px;\n  height: 21px;\n  margin: 1px;\n  font-size: 12px;\n  cursor: pointer;\n  border: 2px solid transparent;\n}\n.single-date-picker__date-cell:hover:not(.single-date-picker__date-cell_selected) {\n  border-radius: 50%;\n  border-color: silver;\n}\n.single-date-picker__date-cell_prev,\n.single-date-picker__date-cell_next {\n  opacity: .5;\n}\n.single-date-picker__date-cell_selected {\n  cursor: auto;\n  border-radius: 50%;\n  border: 2px solid #d8d7d7;\n  background-color: #d8d7d7;\n}\n");var y=l.bemClassName("single-date-picker"),v=function(e){var t=e.duration,n=void 0===t?"left":t,r=e.onClick,a=e.children,o=void 0===a?null:a;return f.default.createElement("div",{onClick:r,className:l.elementClassesConcat(y(),"arrow",d.default({},n,!0))},o||f.default.createElement(h,null))},b=function(e){var t=e.openMonthDate,n=e.selectedDate,r=e.setSelectedDate,a=e.cellContentLayout,i=e.beforeCellClick,p=e.afterCellClick,h=o.getPrevMonth(t),g=o.getNextMonth(t),m=o.getLastDateOfMonth(h),v=o.getDayOfMonthNumber(m),b=o.getFirstDateOfMonth(t),x=o.getLastDateOfMonth(t),k=o.getDayOfWeekNumber(b),C=o.getDayOfWeekNumber(x),_=k?k-1:6,w=o.getDayOfMonthNumber(x),D=C?8-C:0,O=function(e,t,n,r,a){var i=[],c=[];return function(p,h){var g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",m=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return Array(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0).fill("").forEach((function(v,b){var x,k=++b,C=m?m+k:k,_=o.getDateByDayOfMonthNumber(h,C),w=null!==t&&o.isDatesEqual(_,t),D=l.elementClassesConcat(y(),"date-cell",(x={},d.default(x,g,Boolean(g)),d.default(x,"selected",w),x)),O="function"==typeof e?e({monthStatus:p,cellDate:_,selectedDate:t,dateNumber:C}):C;c.push(f.default.createElement("div",{key:_.getTime(),className:D,onClick:s.default(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("function"!=typeof r){e.next=3;break}return e.next=3,r(_);case 3:if(n((function(){return _})),"function"!=typeof a){e.next=7;break}return e.next=7,a(_);case 7:case"end":return e.stop()}}),e)})))},O)),7===c.length&&(i.push(f.default.createElement("div",{key:i.length,className:y("date-row")},c)),c=[])})),[i]}}(a,n,r,i,p);O("prev",h,_,"prev",v-_);var M=O("open",t,w),N=c.default(M,1)[0];4===N.length&&(D=D?D+7:14),5===N.length&&(D=D||7);var E=O("next",g,D,"next"),j=c.default(E,1)[0];return f.default.createElement("div",{className:y("table")},j)};module.exports=function(e){var t,n=e.className,r=void 0===n?"":n,i=e.modifiers,d=void 0===i?{}:i,p=e.openDate,h=void 0===p?new Date:p,g=e.value,x=e.monthNamesArray,k=void 0===x?["January","February","March","April","May","June","July","August","September","October","November","December"]:x,C=e.dayOfWeekArray,_=void 0===C?["M","T","W","T","F","ST","SN"]:C,w=e.cellContentLayout,D=e.navContentLayout,O=e.arrowContent,M=e.beforeChangeMonth,N=e.afterChangeMonth,E=e.beforeChangeYear,j=e.afterChangeYear,S=e.beforeCellClick,A=e.afterCellClick,P=a.useState(g),Y=c.default(P,2),L=Y[0],T=Y[1],q=a.useState(h),F=c.default(q,2),B=F[0],W=F[1],z=l.blockClassesConcat(y(),d,r);return f.default.createElement("div",{className:z},f.default.createElement("div",{className:y("header")},function(e){var t=e.monthNamesArray,n=e.openMonthDate,r=e.setOpenMonthDate,a=e.selectedDate,l=e.setSelectedDate,i=e.arrowContent,c=e.navContentLayout,d=e.beforeChangeMonth,p=e.afterChangeMonth,h=e.beforeChangeYear,g=e.afterChangeYear,b=n.getMonth(),x=o.getMonthNameByMonthIndex(b,t),k=n.getFullYear(),C={openMonthDate:n,setOpenMonthDate:r,openMonthName:x,openMontYearNumber:k,selectedDate:a,setSelectedDate:l},_=function(){var e=s.default(u.default.mark((function e(t){var a,l;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="next"===t?o.getNextMonth(n):o.getPrevMonth(n),l=n.getFullYear()!==a.getFullYear(),"function"!=typeof d){e.next=4;break}return e.next=4,d(C);case 4:if("function"!=typeof h||!l){e.next=7;break}return e.next=7,h(C);case 7:if(r((function(){return a})),"function"!=typeof p){e.next=11;break}return e.next=11,p(C);case 11:if("function"!=typeof g||!l){e.next=14;break}return e.next=14,g(C);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w="function"==typeof c?c(m(m({},C),{},{changeMonthAction:_})):null;return f.default.createElement("div",{className:y("nav")},w?f.default.createElement(f.default.Fragment,null,w):f.default.createElement(f.default.Fragment,null,f.default.createElement(v,{duration:"left",onClick:function(){return _("prev")}},i),f.default.createElement("div",{className:y("open-date")},f.default.createElement("span",{className:y("month-name")},x),f.default.createElement("span",{className:y("full-year")},k)),f.default.createElement(v,{duration:"right",onClick:function(){return _("next")}},i)))}({monthNamesArray:k,openMonthDate:B,setOpenMonthDate:W,selectedDate:L,arrowContent:O,navContentLayout:D,setSelectedDate:T,beforeChangeMonth:M,afterChangeMonth:N,beforeChangeYear:E,afterChangeYear:j}),(t={dayOfWeekArray:_}.dayOfWeekArray.map((function(e,t){return f.default.createElement("span",{className:y("day-of-week"),key:t},e)})),f.default.createElement("div",{className:y("header-row")},t))),b({openMonthDate:B,selectedDate:L,setSelectedDate:T,cellContentLayout:w,beforeCellClick:S,afterCellClick:A}))};
